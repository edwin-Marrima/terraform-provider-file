---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "Data Source: file_transformer"
subcategory: ""
description: |-
  Provide ability to change content files with json, yml and .env extension
---

<!-- TODO: explain about data source behavior -->

# file_transformer (Data Source)

The `file_transformer` data source provides an interface between terraform and the file system running terraform, allowing to overwrite, delete/edit file contents. The `file_transformer` data source can be used with existing or non-existing files, currently supported file extensions are json, .env and yaml (or yml).
			
~> **Warning** It is necessary that you grant sufficient permissions (_chmod +rw_) so that the provider can read and make changes to the contents of the specified file. If the file does not exist, the `file` provider will try to create a new file or subfolder, so the permissions must also cover this situation.

## Example Usage

### Convert file with json format to yaml

```terraform
data "file_transformer" "foo" {
  file                 = "./foo1.json"
  output               = "./foo2.yml"
  override_array_items = true
  items = jsonencode(
		{
			"name"="bar"
		}
	)
}
```

### DotEnv File (.env)

~> NOTE: When the file extension is _.env_ only _file_ and items are taken into account (so filling in the other properties has no effect).

```terraform

resource "aws_s3_bucket" "foo_s3" {
    bucket = "bar"
}

data "file_transformer" "foo" {
  file                 = "./subfolder/.env"
  items = <<EOT
    BUCKET_ARN=aws_s3_bucket.foo_s3.arn
    USERNAME=foo123
	EOT
}
```
### Set environment variables in containers (docker-compose.yml)

~> NOTE: to ensure portability even when the file extension is yml we add values using JSON syntax

```terraform

data "file_transformer" "foo" {
    file                 = "./docker-compose.yml"
    //allows previously defined environment variables to not be overridden
    override_array_items = false
    items = jsonencode(
        {
          "my-container" = {
              environment = ["NODE_ENV=production"]
          }
        }
    )   
}

```

## Argument Reference

The following arguments are supported:

* `file` - (Required) Source file, the content provided in `items` field is merged with the content of this file. If  `output` property is empty, the merge result will be saved in the given file. Currently supported file extensions are _json, .env and yaml (or yml)_. When the file extension is _.env_ only _file_ and _items_ properties are taken into account (so filling in the other properties has no effect).

* `items` - (Required) Content to be placed in the file, it's necessary to encode items using JSON syntax (only when file extension is json or yaml), thus we advise to use the terraform built-in function [`jsonencode`](https://developer.hashicorp.com/terraform/language/functions/jsonencode) to assign any value to this property. 

* `output` - (Optional) Destination file. Defaults to the value of `file` property.

* `override_array_items` - (Optional) In situations where the object defined in the `items` field contains a _Key_ whose associated value is array and the same _Key_ exists (on the same level) in the specified file, if this field is false then the key values (defined in the `items` field and specified file) will be merged, on the other hand if this field is set to true, then the value associated with the same _Key_ in the selected file will be replaced by the value (associated with the _Key_) defined in the `items` field. This setting is only applicable to json and yaml files. Defaults to `true`.



